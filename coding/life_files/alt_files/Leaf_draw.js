function circularOutlinedLeaf(f,a,g,d,c,e,b){f.save();f.beginPath();f.arc(a,g,d-c*0.5,0,Math.PI*2,true);f.fillStyle=e;f.fill();f.strokeStyle=b;f.lineWidth=c;f.stroke();f.restore()}
function circularDottedLeaf(e,a,f,c,d,b){e.save();e.beginPath();e.arc(a,f,c*0.927,0,Math.PI*2,true);e.strokeStyle=b;e.lineWidth=c*0.146;e.setLineDash([0,c*0.292]);e.stroke();e.fillStyle=d;e.fill();e.restore()}
function naturalLeaf(k,q,o,u,D,n,t,l,p,g,F){k.save();var w=Math.sin(D);var a=Math.cos(D);var E=Math.sin(D+Math.PI/2);var v=Math.cos(D+Math.PI/2);var f=q+Math.cos(D-Math.PI*0.2)*u;var e=o+Math.sin(D-Math.PI*0.2)*u;var C=q+Math.cos(D+Math.PI*0.2)*u;var B=o+Math.sin(D+Math.PI*0.2)*u;var A=Math.sin(D-Math.PI*0.2+Math.PI/2);var G=Math.cos(D-Math.PI*0.2+Math.PI/2);var s=Math.sin(D+Math.PI*0.2+Math.PI/2);var z=Math.cos(D+Math.PI*0.2+Math.PI/2);var j=Math.sin(D+l+p*0.5);var d=Math.cos(D+l+p*0.5);var h=Math.sin(D+l-p*0.5);var b=Math.cos(D+l-p*0.5);var m=q+u*(1+n)*a+u*t*v;var i=o+u*(1+n)*w+u*t*E;k.beginPath();k.arc(q,o,u,D+Math.PI*0.2,D-Math.PI*0.2,false);k.bezierCurveTo(f+u*0.3*G,e+u*0.3*A,m-u*0.15*d,i-u*0.15*j,m,i);k.bezierCurveTo(m-u*0.15*b,i-u*0.15*h,C-u*0.3*z,B-u*0.3*s,C,B);k.fillStyle=F;k.fill();var c=0.88;if(u<20){c=0.8}else{if(u<50){c=0.8+0.08*(u-20)/(20)}}f=q+Math.cos(D-Math.PI*0.2)*u*c;e=o+Math.sin(D-Math.PI*0.2)*u*c;C=q+Math.cos(D+Math.PI*0.2)*u*c;B=o+Math.sin(D+Math.PI*0.2)*u*c;j=Math.sin(D+l+p*0.2);d=Math.cos(D+l+p*0.2);h=Math.sin(D+l-p*0.2);b=Math.cos(D+l-p*0.2);k.beginPath();k.arc(q,o,u*c,D+Math.PI*0.2,D-Math.PI*0.2,false);k.bezierCurveTo(f+u*0.3*G,e+u*0.3*A,m-u*0.15*d,i-u*0.15*j,m,i);k.bezierCurveTo(m-u*0.15*b,i-u*0.15*h,C-u*0.3*z,B-u*0.3*s,C,B);k.fillStyle=g;k.fill();k.restore()}
function randomNaturalLeaf(f,b,h,d,g,e,c){var a=Math.floor(g*112345)%4;if(a==0){naturalLeaf(f,b,h,d,g,0.45,0.25,Math.PI*0.4,Math.PI*0.4,e,c)}if(a==1){naturalLeaf(f,b,h,d,g,0.45,-0.15,0,0.1,e,c)}if(a==2){naturalLeaf(f,b,h,d,g,0.4,-0.25,-Math.PI*0.4,Math.PI*0.2,e,c)}if(a==3){naturalLeaf(f,b,h,d,g,0.45,0.15,0,0.2,e,c)}}
function arcText(c,k,j,a,b,m,f,h,g,l,e){c.save();if(e){c.font=e+" "+((Math.floor(g)).toString()+"px courier")}else{c.font=((Math.floor(g)).toString()+"px courier")}c.fillStyle=l;c.translate(k,j);c.rotate(f);if(m==-1){c.rotate(Math.PI)}for(var d=0;d<b.length;d++){c.save();c.translate(0,m*(-a));c.fillText(b[d],0,0);c.restore();c.rotate(m*h)}c.restore()}
function ghostLeafBase(d,a,g,c,f,e){var b=0;if(c>90){b=3}if((b>2)&&(!((typeof(drawsponsors)!=="undefined")&&drawsponsors==false))){circularOutlinedLeaf(d,a,g,c*0.935,c*0.015,e.insideColor,e.outlineColor)}else{circularDottedLeaf(d,a,g,c,e.insideColor,e.outlineColor)}}
function fullLeafBase(d,h,g,a,b,e,i){var f=0;if(a>20){f=1}if(e==1){circularOutlinedLeaf(d,h,g,a,a*0.12,i.insideColor,i.outlineColor)}else{if(f>0){d.beginPath();var c=a*1.038;d.arc(h,g,c,0,Math.PI*2,true);d.fillStyle=i.BGColor;d.fill()}randomNaturalLeaf(d,h,g,a,b,i.insideColor,i.outlineColor)}}
function ghostLeaf(h,o,m,q,t,l,a,u,d,v,e,b,n){var g=0;if(q>200){g=4}else{if(q>90){g=3}else{if(q>50){g=2}else{if(q>20){g=1}}}}var i=null;if(g==1){if(l&&(((((l[0]-o)*(l[0]-o))+((l[1]-m)*(l[1]-m)))<=(q*q)))){i="z"}}if((g>2)&&(!((typeof(drawsponsors)!=="undefined")&&drawsponsors==false))){if(l&&(((((l[0]-o)*(l[0]-o))+((l[1]-m)*(l[1]-m)))<=(q*0.935*q*0.935)))){if(l&&(((((l[0]-o)*(l[0]-o))+((l[1]-m)*(l[1]-m)))>=(q*0.78*q*0.78)))){i="s"}}}if(!((typeof(drawsponsors)!=="undefined")&&drawsponsors==false)){if(g>2){h.beginPath();h.arc(o,m,q*0.78,0,Math.PI*2,true);h.strokeStyle=n.waterMark;h.lineWidth=q*0.01;h.stroke();var p=("THIS PART OF THE TREE CAN GROW");var c=2.5/Math.max(32,p.length);var k=Math.PI*2/(Math.max(32,p.length))*0.38;var f=(Math.PI-(p.length)*(k))/2;var j=1;if(i=="s"){arcText(h,o,m,q*(0.85),p,j,-Math.PI*(0.5)+j*f,k,q*c,n.textColor,"bold")}else{arcText(h,o,m,q*(0.85),p,j,-Math.PI*(0.5)+j*f,k,q*c,n.sponsorColor,null)}p=("SPONSOR A SPECIES AND WE'LL ADD IT");c=2.5/Math.max(32,p.length);k=Math.PI*2/(Math.max(32,p.length))*0.38;f=(Math.PI-(p.length)*(k))/2;j=-1;if(i=="s"){arcText(h,o,m,q*(0.85),p,j,-Math.PI*(0.5)+j*f,k,q*c,n.textColor,"bold")}else{arcText(h,o,m,q*(0.85),p,j,-Math.PI*(0.5)+j*f,k,q*c,n.sponsorColor,null)}}}if(g>0){if(e){if(g<2){if(i=="z"){circle_cut_image(h,e,o,m,q*0.85,n.insideColor,n.highlightColor)}else{circle_cut_image(h,e,o,m,q*0.85,n.insideColor,null)}}else{h.fillStyle=n.textColor;if(g>2){rounded_image(h,e,o,m,q*0.75,n.insideColor,n.highlightColor);var s=m+q*0.34;if(a){if(u){autotext(false,null,"Scientific name: "+u,o,m+q*0.5,q*1,q*0.1,h,3)}autotext2(false,null,a,o,m-q*0.55,q*1,q*0.12,h,3);autotext(false,null,d,o,m+q*0.625,q,q*0.1,h,3)}else{if(u){autotext(false,null,"No common name",o,m+q*0.5,q*1,q*0.1,h,3);autotext2(false,null,u,o,m-q*0.55,q*1,q*0.1,h,3);autotext(false,null,d,o,m+q*0.65,q,q*0.1,h,3)}else{autotext(false,null,"No known name",o,m-q*0.55,q*1,q*0.1,h,3);autotext2(false,null,d,o,m+q*0.55,q*1,q*0.12,h,3)}}if(q*0.035>6){if(copyright(h,o+q*0.43,s,q*0.035,v,l,n.insideColor,n.outlineColor,n.textColor)){i="c"}}}else{if(a){autotext2(false,null,a,o,m-q*0.55,q*1.1,q*0.15,h,3)}else{if(u){autotext2(false,null,u,o,m-q*0.55,q*1.1,q*0.15,h,3)}else{autotext2(false,null,d,o,m-q*0.55,q*1.1,q*0.15,h,3)}}rounded_image(h,e,o,m+q*0.2,q*0.95,n.insideColor,n.highlightColor)}}}else{h.fillStyle=n.textColor;if(g<3){if(a){autotext3(false,null,a,o,m,q*1.25,q*0.3,h,3)}else{if(u){autotext3(false,null,u,o,m,q*1.25,q*0.3,h,3)}else{autotext2(false,null,d,o,m,q*1.25,q*0.3,h,3)}}}else{if(a){if(u){autotext(false,null,"Scientific name: "+u,o,m-q*0.45,q*1,q*0.12,h,3)}autotext2(false,null,a,o,m,q*1.35,q*0.25,h,3);autotext(false,null,d,o,m+q*0.45,q*0.9,q*0.12,h,3)}else{if(u){autotext(false,null,"No common name",o,m-q*0.45,q*1,q*0.12,h,3);autotext2(false,null,u,o,m,q*1.35,q*0.25,h,3);autotext(false,null,d,o,m+q*0.45,q*0.9,q*0.12,h,3)}else{autotext(false,null,"No known name",o,m-q*0.4,q*1,q*0.12,h,3);autotext2(false,null,d,o,m+q*0.2,q*1.35,q*0.25,h,3)}}}}}return i}
function fullLeaf(o,v,t,z,C,g,D,s,F,f,a,E,b,B,G,i,c,u,k,j,h,e){var n=0;if(z>200){n=4}else{if(z>90){n=3}else{if(z>50){n=2}else{if(z>20){n=1}}}}var m=null;if(n==1){if(s&&(((((s[0]-v)*(s[0]-v))+((s[1]-t)*(s[1]-t)))<=(z*z)))){m="z"}}if((n>2)&&(!((typeof(drawsponsors)!=="undefined")&&drawsponsors==false))){if(s&&(((((s[0]-v)*(s[0]-v))+((s[1]-t)*(s[1]-t)))<=(z*z)))){if(s&&(((((s[0]-v)*(s[0]-v))+((s[1]-t)*(s[1]-t)))>=(z*0.88*z*0.88)))){m="s"}}}if(!((typeof(drawsponsors)!=="undefined")&&drawsponsors==false)){if(n>2){var w=(F+f).substr(0,76);if(n<4){if(w.length>44){w=(F).substr(0,44)}else{w=F}}var d=2.5/Math.max(32,w.length);var q=Math.PI*2/(Math.max(32,w.length))*0.38;var l=(Math.PI-(w.length)*(q))/2;var p=1;if((((C)%(Math.PI*2))>(Math.PI))||(g==1)){p=-1}if((m=="s")&&(!D)){arcText(o,v,t,z*(1-0.06),w,p,-Math.PI*(0.5)+p*l,q,z*d,u.highlightColor,"bold")}else{arcText(o,v,t,z*(1-0.06),w,p,-Math.PI*(0.5)+p*l,q,z*d,u.sponsorColor,null)}}}if(n>0){if(i){if(n<2){if(m=="z"){circle_cut_image(o,i,v,t,z*0.85,u.outlineColor,u.highlightColor)}else{circle_cut_image(o,i,v,t,z*0.85,u.insideColor,null)}}else{var A=0;o.fillStyle=u.textColor;if(n>2){if(b||B){if(a){autotext(false,"italic",E,v,t+z*0.5,z*1,z*0.1,o,3);autotext2(false,null,a,v,t-z*0.6,z*1.2,z*0.12,o,3)}else{autotext(false,null,"No common name",v,t+z*5,z*1,z*0.1,o,3);autotext2(false,"italic",E,v,t-z*0.6,z*1.2,z*0.12,o,3)}rounded_image(o,i,v,t,z*0.75,u.insideColor,u.highlightColor,k,j,h,e);A=t+z*0.34;autotext(false,null,b,v,t+z*0.625,z,z*0.07,o,3);autotext(false,null,B,v,t+z*0.725,z,z*0.07,o,3)}else{if(a){autotext2(false,"italic",E,v,t+z*0.63,z*1.1,z*0.12,o,3);autotext2(false,null,a,v,t-z*0.55,z*1.2,z*0.15,o,3)}else{autotext2(false,null,"No common name",v,t+z*0.63,z*1.1,z*0.12,o,3);autotext2(false,"italic",E,v,t-z*0.55,z*1.2,z*0.15,o,3)}rounded_image(o,i,v,t+z*0.05,z*0.75,u.insideColor,u.highlightColor,k,j,h,e);A=t+z*0.39}if(z*0.035>6){if(copyright(o,v+z*0.43,A,z*0.035,G,s,u.outlineColor,u.insideColor,u.highlightColor)){m="c"}}}else{if(a){autotext2(false,null,a,v,t-z*0.55,z*1.1,z*0.15,o,3)}else{autotext2(false,"italic",E,v,t-z*0.55,z*1.1,z*0.15,o,3)}rounded_image(o,i,v,t+z*0.2,z*0.95,u.insideColor,u.highlightColor,k,j,h,e)}}}else{o.fillStyle=u.textColor;if(n<3){if(a){autotext3(false,null,a,v,t,z*1.25,z*0.3,o,3)}else{autotext3(false,"italic",E,v,t,z*1.25,z*0.3,o,3)}}else{if(b||B){if(a){autotext2(false,"italic",E,v,t-z*0.5,z*1.1,z*0.15,o,3);autotext2(false,null,a,v,t,z*1.5,z*0.25,o,3)}else{autotext2(false,null,"No common name",v,t-z*0.5,z*1.1,z*0.15,o,3);autotext2(false,"italic",E,v,t,z*1.5,z*0.25,o,3)}autotext(false,null,b,v,t+z*0.45,z,z*0.1,o,3);autotext(false,null,B,v,t+z*0.6,z,z*0.1,o,3)}else{if(a){autotext2(false,"italic",E,v,t-z*0.45,z*1.1,z*0.15,o,3);autotext3(false,null,a,v,t+z*0.2,z*1.4,z*0.2,o,3)}else{autotext2(false,null,"No common name",v,t-z*0.45,z*1.1,z*0.15,o,3);autotext3(false,"italic",E,v,t+z*0.2,z*1.4,z*0.2,o,3)}}}}}return m};